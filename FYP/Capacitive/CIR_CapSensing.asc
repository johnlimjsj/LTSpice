Version 4
SHEET 1 2104 3936
WIRE 1344 960 1216 960
WIRE 864 992 864 928
WIRE 1344 1008 1344 960
WIRE -752 1024 -752 976
WIRE 1168 1024 1168 960
WIRE 1216 1024 1216 960
WIRE 528 1040 464 1040
WIRE 720 1040 608 1040
WIRE 832 1040 720 1040
WIRE 992 1040 912 1040
WIRE 1152 1072 1104 1072
WIRE 1264 1072 1232 1072
WIRE 592 1104 592 1088
WIRE 592 1120 592 1104
WIRE 544 1136 544 1088
WIRE -752 1152 -752 1104
WIRE -752 1152 -864 1152
WIRE -752 1200 -752 1152
WIRE 720 1200 720 1040
WIRE -864 1216 -864 1152
WIRE 672 1216 624 1216
WIRE 1104 1216 1104 1072
WIRE 1152 1216 1104 1216
WIRE 1264 1216 1264 1072
WIRE 1264 1216 1216 1216
WIRE -1264 1232 -1264 1152
WIRE -1072 1232 -1072 1152
WIRE 384 1232 352 1232
WIRE 464 1232 464 1040
WIRE 464 1232 384 1232
WIRE 672 1264 640 1264
WIRE 1648 1280 1488 1280
WIRE -752 1328 -752 1280
WIRE 720 1328 720 1280
WIRE 1168 1328 1168 1296
WIRE 1488 1328 1488 1280
WIRE 1536 1328 1488 1328
WIRE 992 1344 992 1040
WIRE 1104 1344 1104 1216
WIRE 1104 1344 992 1344
WIRE 1136 1344 1104 1344
WIRE 1648 1344 1648 1280
WIRE 1648 1344 1600 1344
WIRE 1712 1344 1648 1344
WIRE -1264 1360 -1264 1312
WIRE -1072 1360 -1072 1312
WIRE -752 1360 -752 1328
WIRE 1264 1360 1264 1216
WIRE 1264 1360 1200 1360
WIRE 1328 1360 1264 1360
WIRE 1488 1360 1408 1360
WIRE 1536 1360 1488 1360
WIRE 1136 1376 1088 1376
WIRE 1488 1376 1488 1360
WIRE 1488 1408 1488 1376
WIRE 1088 1424 1088 1376
WIRE 1168 1424 1168 1392
WIRE 1392 1424 1392 1408
WIRE 1168 1440 1168 1424
WIRE 1392 1440 1392 1424
WIRE 464 1456 464 1232
WIRE 528 1456 464 1456
WIRE 704 1456 608 1456
WIRE 752 1456 704 1456
WIRE 848 1456 752 1456
WIRE 992 1456 992 1344
WIRE 992 1456 912 1456
WIRE 1344 1456 1344 1408
WIRE 1488 1504 1488 1472
WIRE -1072 1520 -1072 1504
WIRE 592 1536 592 1504
WIRE 544 1552 544 1504
WIRE -1424 1584 -1424 1504
WIRE -1264 1584 -1264 1504
WIRE -1072 1584 -1072 1520
WIRE -640 1584 -640 1504
WIRE 288 1616 288 1536
WIRE 704 1616 704 1456
WIRE 656 1632 608 1632
WIRE 640 1680 624 1680
WIRE 656 1680 640 1680
WIRE -1424 1712 -1424 1664
WIRE -1264 1712 -1264 1664
WIRE -1072 1712 -1072 1664
WIRE -640 1712 -640 1664
WIRE 288 1744 288 1696
WIRE 704 1744 704 1696
FLAG 1088 1424 Vmid
FLAG 1264 1216 c5_ic
FLAG 1344 1008 0
FLAG -1264 1360 0
FLAG -1072 1360 0
FLAG -1264 1712 0
FLAG -1072 1712 0
FLAG -1264 1504 Vdd
FLAG -1072 1520 p1
FLAG -1072 1152 p2
FLAG -1264 1152 reset
FLAG 1168 960 reset
FLAG 1488 1504 0
FLAG 1344 1456 0
FLAG -640 1712 0
FLAG -640 1504 sam
FLAG 1712 1344 Vout
FLAG -864 1216 0
FLAG -752 976 Vcc
FLAG -752 1328 Vee
FLAG 1168 1296 Vcc
FLAG 1168 1424 Vee
FLAG 544 1136 0
FLAG 592 1104 p1
FLAG 624 1216 0
FLAG 640 1264 p2
FLAG 544 1552 0
FLAG 592 1536 p2
FLAG 608 1632 0
FLAG 640 1680 p1
FLAG 720 1328 0
FLAG 704 1744 0
FLAG 384 1232 Vdd
FLAG 752 1456 cref_ic
FLAG 1488 1376 ch_ic
FLAG 288 1744 0
FLAG 288 1536 Vpressure
FLAG 864 928 Vpressure
FLAG -1424 1712 0
FLAG -1424 1504 Vmid
FLAG 720 1040 csense_ic
FLAG 1392 1424 sam
SYMBOL sw 1248 1072 R90
SYMATTR InstName S2
SYMBOL voltage -1264 1216 R0
WINDOW 3 -161 -1 Invisible 2
SYMATTR Value PULSE(0 {v_on} {reset_offset} {t_rise} {t_fall} {reset_t_on} {t_period} {cycle})
SYMATTR InstName V3
SYMBOL voltage -1072 1216 R0
WINDOW 3 -71 116 Invisible 2
SYMATTR Value PULSE(0 {v_on} {p2_offset} {t_rise} {t_fall} {t_on} {t_period} {cycle})
SYMATTR InstName V4
SYMBOL voltage -1264 1568 R0
WINDOW 3 -56 1 Left 2
SYMATTR Value 1.5
SYMATTR InstName V8
SYMBOL voltage -1072 1568 R0
WINDOW 3 -81 108 Invisible 2
SYMATTR Value PULSE(0 {v_on} {p1_offset} {t_rise} {t_fall} {t_on} {t_period} {cycle})
SYMATTR InstName V9
SYMBOL Opamps/opamp 1568 1280 R0
SYMATTR InstName U1
SYMBOL sw 1312 1360 R270
SYMATTR InstName S3
SYMBOL cap 1472 1408 R0
SYMATTR InstName Ch
SYMATTR Value {c_hold_base*c_scale}
SYMBOL voltage -640 1568 R0
WINDOW 3 -161 -1 Invisible 2
SYMATTR Value PULSE(0 {v_on} {sam_offset} {t_rise} {t_fall} {sam_t_on} {t_period} {cycle})
SYMATTR InstName V1
SYMBOL voltage -752 1008 R0
SYMATTR InstName V2
SYMATTR Value 15
SYMBOL voltage -752 1184 R0
SYMATTR InstName V5
SYMATTR Value 15
SYMBOL sw 512 1040 R270
SYMATTR InstName S5
SYMBOL sw 720 1184 R0
SYMATTR InstName S6
SYMBOL sw 512 1456 R270
SYMATTR InstName S7
SYMBOL sw 704 1600 R0
SYMATTR InstName S8
SYMBOL cap 912 1440 R90
WINDOW 3 32 32 VTop 2
WINDOW 0 0 32 VBottom 2
SYMATTR Value {c_in_base*c_scale}
SYMATTR InstName Cref
SYMBOL voltage 288 1600 R0
WINDOW 3 -196 -32 Left 2
SYMATTR Value SINE(0 {press} 100)
SYMATTR InstName V10
SYMBOL cap 1216 1200 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 Invisible 2
SYMATTR InstName C1
SYMATTR Value {c_f_base*c_scale}
SYMBOL SENSOR_CAP 864 1040 R180
WINDOW 39 0 0 Invisible 2
WINDOW 0 -11 -30 Bottom 2
SYMATTR SpiceLine Cvar={c_in_base*c_scale*0.255}, Cref={c_in_base*c_scale}
SYMATTR InstName CapSensor
SYMBOL Opamps/opamp 1168 1296 R0
SYMATTR InstName U3
SYMBOL voltage -1424 1568 R0
WINDOW 3 -56 1 Left 2
SYMATTR Value 2.5
SYMATTR InstName V15
TEXT -280 3144 Left 2 !.tran {10m*scale} {120m*scale}\n;.ac oct 100 1 1000meg
TEXT -272 2720 Left 2 !.model SW SW(Ron=1 Roff=10g Vt=0.5 Vh=0.01)
TEXT -280 2896 Left 2 !.ic V(Vci) = 0\n.ic V(c4_ic)=0\n.ic V(c5_ic)=0\n.ic V(c6_ic)=0\n.ic V(cref_ic)=0\n.ic V(csense_ic)=0\n.ic V(ch_ic)=0\n.ic V(ctest_ic)=0
TEXT -264 1992 Left 2 !;.step param Cx list 1 2\n;.param Cin table {Cx, 1, c_in_base*c_scale, 2, c_in_base*c_scale*0.8, 3, c_in_base*c_scale*0.6}
TEXT -272 2696 Left 2 !.lib opamp.sub
TEXT -992 2320 Left 2 !.param v_on 5\n.param t_period {1m*scale}\n.param t_on {0.48m*scale}\n.param t_rise {1n*scale}\n.param t_fall {1n*scale}\n.param cycle 1000
TEXT -992 2568 Left 2 !.param p1_offset {0}\n.param p2_offset {p1_offset+t_on*1.05}\n.param sam_offset {p1_offset+1.5*t_on}\n.param reset_offset {0}
TEXT -992 2152 Left 2 !.param sam_t_on {t_on*0.25}\n.param reset_t_on {t_on*0.25}
TEXT -992 1976 Left 2 !.param scale 0.1
TEXT -992 2288 Left 2 ;timing params
TEXT -272 3096 Left 2 ;Analysis Commands
TEXT -264 2856 Left 2 ;Initial Capacitor Conditions
TEXT -264 2656 Left 2 ;Model Definitions
TEXT -264 1952 Left 2 ;Changing Input
TEXT -264 2520 Left 2 !.param c_scale 0.001
TEXT -264 2480 Left 2 ;Capacitance Scale
TEXT -264 2352 Left 2 !.param c_in_base 2u\n.param c_f_base 1u\n.param c_hold_base 0.5u
TEXT -264 2312 Left 2 ;Capacitance Scale
TEXT -256 2184 Left 2 !.param v_time 3
TEXT -264 2072 Left 2 !.step param press list 0.5 1.5 3\n;.step param spress 0.1 2 0.1
TEXT 1040 1952 Left 2 ;; MEASURING\n.save V(Vout)\n.measure VoutAvg avg V(Vout)\n.option plotwinsize=0 numdgt=15
