Version 4
SHEET 1 3520 3184
WIRE 800 144 688 144
WIRE 800 160 800 144
WIRE 688 208 688 144
WIRE 640 224 512 224
WIRE 512 240 512 224
WIRE 640 272 608 272
WIRE -1104 368 -1312 368
WIRE -832 368 -1104 368
WIRE -640 368 -832 368
WIRE -432 368 -640 368
WIRE -192 368 -432 368
WIRE 80 368 -192 368
WIRE 336 368 80 368
WIRE 592 368 336 368
WIRE 688 368 688 288
WIRE 688 368 592 368
WIRE 816 368 688 368
WIRE 880 368 816 368
WIRE 1008 368 880 368
WIRE 1120 384 1104 384
WIRE 1168 384 1120 384
WIRE 1008 400 960 400
WIRE -1312 432 -1312 368
WIRE -1104 432 -1104 368
WIRE -832 448 -832 368
WIRE -640 448 -640 368
WIRE -432 448 -432 368
WIRE -192 448 -192 368
WIRE 80 448 80 368
WIRE 336 448 336 368
WIRE 592 464 592 368
WIRE 960 464 960 400
WIRE 1552 512 1488 512
WIRE 1552 544 1488 544
WIRE 1552 576 1488 576
WIRE 960 592 960 544
WIRE 1552 608 1488 608
WIRE -1312 624 -1312 496
WIRE -1104 624 -1104 496
WIRE 880 624 880 368
WIRE 1168 624 1168 384
WIRE 1216 624 1168 624
WIRE -1360 640 -1424 640
WIRE -1152 640 -1216 640
WIRE -832 640 -832 512
WIRE -640 640 -640 512
WIRE -432 640 -432 512
WIRE -192 640 -192 512
WIRE 80 640 80 512
WIRE 336 640 336 512
WIRE 1552 640 1488 640
WIRE -1424 656 -1424 640
WIRE -1216 656 -1216 640
WIRE -880 656 -944 656
WIRE -688 656 -752 656
WIRE -480 656 -544 656
WIRE -240 656 -304 656
WIRE 32 656 -32 656
WIRE 288 656 224 656
WIRE 592 656 592 528
WIRE 992 656 928 656
WIRE -944 672 -944 656
WIRE -752 672 -752 656
WIRE -544 672 -544 656
WIRE -304 672 -304 656
WIRE -32 672 -32 656
WIRE 224 672 224 656
WIRE 544 672 480 672
WIRE 1552 672 1488 672
WIRE -1376 688 -1392 688
WIRE -1360 688 -1376 688
WIRE -1168 688 -1184 688
WIRE -1152 688 -1168 688
WIRE 480 688 480 672
WIRE -896 704 -912 704
WIRE -880 704 -896 704
WIRE -704 704 -720 704
WIRE -688 704 -704 704
WIRE -496 704 -512 704
WIRE -480 704 -496 704
WIRE -256 704 -272 704
WIRE -240 704 -256 704
WIRE 16 704 0 704
WIRE 32 704 16 704
WIRE 272 704 256 704
WIRE 288 704 272 704
WIRE 1552 704 1488 704
WIRE 528 720 512 720
WIRE 544 720 528 720
WIRE 1552 736 1488 736
WIRE -1312 832 -1312 704
WIRE -1104 832 -1104 704
WIRE -832 848 -832 720
WIRE -640 848 -640 720
WIRE -432 848 -432 720
WIRE -192 848 -192 720
WIRE 80 848 80 720
WIRE 336 848 336 720
WIRE 592 864 592 736
WIRE 880 864 880 704
WIRE -1120 1040 -1120 960
WIRE -1088 1040 -1088 960
WIRE -848 1056 -848 976
WIRE -816 1056 -816 976
WIRE -656 1056 -656 976
WIRE -624 1056 -624 976
WIRE -448 1056 -448 976
WIRE -416 1056 -416 976
WIRE -208 1056 -208 976
WIRE -176 1056 -176 976
WIRE 64 1056 64 976
WIRE 96 1056 96 976
WIRE 320 1056 320 976
WIRE 352 1056 352 976
WIRE 576 1072 576 992
WIRE 608 1072 608 992
WIRE 864 1072 864 992
WIRE 896 1072 896 992
WIRE -16 1760 -16 1680
WIRE 288 1760 288 1680
WIRE 496 1760 496 1680
WIRE -16 1888 -16 1840
WIRE 288 1888 288 1840
WIRE 496 1888 496 1840
WIRE 288 2112 288 2032
WIRE 496 2112 496 2032
WIRE 288 2240 288 2192
WIRE 496 2240 496 2192
FLAG 288 1888 0
FLAG 288 1680 Vdd
FLAG 800 160 0
FLAG 288 2240 0
FLAG 288 2032 phi1
FLAG 496 2240 0
FLAG 496 2032 phi2
FLAG 608 272 phi1
FLAG 512 240 0
FLAG 816 368 Vx
FLAG 496 1888 0
FLAG 496 1680 CONV
FLAG 272 704 CONV
FLAG 224 672 0
FLAG 528 720 CONV
FLAG 480 688 0
FLAG 864 1072 0
FLAG 896 1072 Vdd
FLAG 944 928 phi2
FLAG 320 1056 0
FLAG 352 1056 Vdd
FLAG 576 1072 0
FLAG 608 1072 Vdd
FLAG 16 704 CONV
FLAG -32 672 0
FLAG 64 1056 0
FLAG 96 1056 Vdd
FLAG 144 912 b2
FLAG -256 704 CONV
FLAG -304 672 0
FLAG -208 1056 0
FLAG -176 1056 Vdd
FLAG -128 912 b3
FLAG -544 672 0
FLAG -448 1056 0
FLAG -416 1056 Vdd
FLAG -368 912 b4
FLAG -752 672 0
FLAG -656 1056 0
FLAG -624 1056 Vdd
FLAG -896 704 CONV
FLAG -944 672 0
FLAG -848 1056 0
FLAG -816 1056 Vdd
FLAG -704 704 CONV
FLAG -768 912 b6
FLAG -1168 688 CONV
FLAG -1216 656 0
FLAG -1120 1040 0
FLAG -1088 1040 Vdd
FLAG -1040 896 b7
FLAG -576 912 b5
FLAG 960 592 0
FLAG 1552 512 b7
FLAG 1552 544 b6
FLAG 1552 576 b5
FLAG 1552 608 b4
FLAG 1552 640 b3
FLAG 1552 672 b2
FLAG 1552 704 b1
FLAG 1552 736 b0
FLAG 400 912 b1
FLAG 656 928 b0
FLAG -1376 688 CONV
FLAG -1424 656 0
FLAG -1312 832 Vdd
FLAG -496 704 CONV
FLAG -16 1888 0
FLAG -16 1680 Vpress
FLAG 992 656 Vpress
FLAG 1120 384 Vcmp
SYMBOL voltage 288 1744 R0
WINDOW 3 -31 -10 Left 2
WINDOW 0 24 16 Left 2
SYMATTR Value 5
SYMATTR InstName V11
SYMBOL voltage 496 2096 R0
WINDOW 3 -196 -32 Invisible 2
WINDOW 0 24 16 Left 2
SYMATTR Value PULSE(0 3 {t_delay} {t_risefall} {t_risefall} {t_on+t_offset} {t_period} 1)
SYMATTR InstName V3
SYMBOL voltage 288 2096 R0
WINDOW 3 -196 -32 Invisible 2
WINDOW 0 24 16 Left 2
SYMATTR Value PULSE(0 3 {t_delay} {t_risefall} {t_risefall} {t_on} {t_period} 1)
SYMATTR InstName V2
SYMBOL sw 688 192 R0
SYMATTR InstName S1
SYMBOL voltage 496 1744 R0
WINDOW 3 -196 -32 Invisible 2
WINDOW 0 24 16 Left 2
SYMATTR Value PULSE(0 3 {t_conv_begin} {t_risefall} {t_risefall} {t_conv_period} {t_period} 1)
SYMATTR InstName V5
SYMBOL sw 336 624 R0
SYMATTR InstName S4
SYMBOL sw 592 640 R0
SYMATTR InstName S5
SYMBOL COM_SPDT 880 960 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X1
SYMBOL COM_CAP 592 496 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName C_LSB
SYMATTR Value C={1*c_lsb}
SYMBOL COM_CAP 336 480 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName X3
SYMATTR Value C={2*c_lsb}
SYMBOL COM_SPDT 336 944 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X4
SYMBOL COM_SPDT 592 960 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X5
SYMBOL sw 80 624 R0
SYMATTR InstName S2
SYMBOL COM_CAP 80 480 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName X6
SYMATTR Value C={4*c_lsb}
SYMBOL COM_SPDT 80 944 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X7
SYMBOL sw -192 624 R0
SYMATTR InstName S3
SYMBOL COM_CAP -192 480 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName X8
SYMATTR Value C={8*c_lsb}
SYMBOL COM_SPDT -192 944 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X9
SYMBOL sw -432 624 R0
SYMATTR InstName S6
SYMBOL COM_CAP -432 480 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName X10
SYMATTR Value C={16*c_lsb}
SYMBOL COM_SPDT -432 944 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X11
SYMBOL sw -640 624 R0
SYMATTR InstName S7
SYMBOL COM_CAP -640 480 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName X12
SYMATTR Value C={32*c_lsb}
SYMBOL COM_SPDT -640 944 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X13
SYMBOL sw -832 624 R0
SYMATTR InstName S8
SYMBOL COM_CAP -832 480 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName X14
SYMATTR Value C={64*c_lsb}
SYMBOL COM_SPDT -832 944 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X15
SYMBOL sw -1104 608 R0
SYMATTR InstName S9
SYMBOL COM_CAP -1104 464 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName C_MSB
SYMATTR Value C={128*c_lsb}
SYMBOL COM_SPDT -1104 928 R270
WINDOW 0 48 -64 Invisible 2
SYMATTR InstName X17
SYMBOL COM_SAR 1264 624 R0
WINDOW 0 8 -136 Bottom 2
WINDOW 39 0 0 Invisible 2
SYMATTR InstName X19
SYMATTR SpiceLine T_CONV_BEGIN={t_conv_begin}, T_CONV_PERIOD={t_conv_period}
SYMBOL COM_Comparator 1056 384 R0
SYMATTR InstName Comparator
SYMBOL voltage 960 448 R0
SYMATTR InstName Vref_cmp
SYMATTR Value 0
SYMBOL sw -1312 608 R0
SYMATTR InstName S10
SYMBOL COM_CAP -1312 464 R180
WINDOW 0 32 16 Center 2
WINDOW 3 -28 0 VBottom 2
SYMATTR InstName C_OFFSET
SYMATTR Value C={c_offset}
SYMBOL SENSOR_CAP 880 656 R270
WINDOW 0 21 -46 VTop 2
WINDOW 39 -148 84 Invisible 2
SYMATTR InstName Csense
SYMATTR SpiceLine Cvar={2*c_lsb}, Cref={c_offset}
SYMBOL voltage -16 1744 R0
WINDOW 3 -31 -10 Left 2
WINDOW 0 24 16 Left 2
SYMATTR Value 1
SYMATTR InstName V1
TEXT 1048 2168 Left 2 !;ANALYSIS commands\n.tran {0.1m*t_scale} {3.5m*t_scale}
TEXT 1040 2040 Left 2 !;MODEL Definitions\n.model SW SW(Ron=5 Roff=10g Vt=0.5 Vh=0)
TEXT 1040 1832 Left 2 !;TIMING\n.param t_scale 0.3m\n.param t_period {3m*t_scale}\n.param t_on {0.5m*t_scale}\n.param t_offset {0.1m*t_scale}\n.param t_delay {0.0m*t_scale}\n.param t_risefall {10n*t_scale}\n.param t_conv_begin {t_delay+t_on+t_offset*1.01}\n.param t_conv_period {t_period+t_offset-t_on}
TEXT 1040 1720 Left 2 !;BASE capacitance values\n.param c_scale 1\n.param c_lsb {2.55p*c_scale}\n.param c_offset {10p*c_scale}
TEXT 320 1504 Left 5 ;TIMING
TEXT 1040 1624 Left 5 ;SPICE DIRECTIVES
RECTANGLE Normal 948 1588 1668 2280 2
RECTANGLE Normal 676 2284 132 1448 2
